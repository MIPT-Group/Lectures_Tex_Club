\begin{theorem}
	Рассмотрим ЧУМ $\trbr{2^{\{1, \ldots, n\}}, \subseteq}$. Утверждается, что
	\[
		\mu(X, Y) = (-1)^{|Y| - |X|},\ X \subseteq Y.
	\]
\end{theorem}

\begin{proof}
	Воспользуемся индукцией по $|Y| - |X|$:
	\begin{enumerate}
		\item База: $|X| = |Y| \lra X = Y$, а значит:
		\[
			\mu(X, Y) = \mu(X, X) = 1 = (-1)^{|Y| - |X|}.
		\]
		
		\item Шаг: $|Y| > |X| \lra Y \supset X$
		\begin{multline*}
			\mu(X, Y) = -\suml_{X \subseteq Z \subset Y} \mu(X, Z) = -\suml_{X \subseteq Z \subset Y} (-1)^{|Z| - |X|} = -\suml_{k = |X|}^{|Y| - 1} (-1)^{k - |X|} \cdot C_{|Y| - |X|}^{k - |X|} =
			\\
			= -\suml_{m = 0}^{|Y| - |X| - 1} C_{|Y| - |X|}^m \cdot (-1)^m = -(0 - (-1)^{|Y| - |X|}) = (-1)^{|Y| - |X|}.
		\end{multline*}
	\end{enumerate}
\end{proof}

\subsection{Доказательство формулы включений и исключений через обращение Мёбиуса}

Рассмотрим произвольные множества $A_1, \ldots, A_n$, при этом $A = \bigcup_{i = 1}^n A_i$ и  дополнительно рассмотрим ЧУМ $\trbr{2^{1, \ldots, n}, \subseteq}$.

Введём функцию $f(\{i_1, \ldots, i_k\}),\ \{i_1, \ldots, i_k\} \subseteq \{1, \ldots, n\}$ --- количество элементов множества $A$, которые \textbf{могут} принадлежать множествам $A_{i_1}, \ldots, A_{i_k}$ \textbf{и точно принадлежат всем остальным}. Тогда
\begin{align*}
	&{f(\{1, \ldots, n\}) = |A|,}
	\\
	&{f(\{i_1, \ldots, i_k\}) = \left|\bigcap_{i \notin \{i_1, \ldots, i_k\}} A_i\right|,\quad \{i_1, \ldots, i_k\} \subset \{1, \ldots, n\}.}
\end{align*}

Ещё нам нужна функция $g(\{i_1, \ldots, i_k\})$ --- количество элементов множества $A$, которые \textbf{не принадлежат} $A_{i_1}, \ldots, A_{i_k}$, \textbf{но принадлежат всем остальным}. Тогда, если обозначить за $I = \{i_1, \ldots, i_k\}$, получим
\[
	f(I) = \suml_{I' \subseteq I} g(I').
\]

\begin{anote}
	Если утверждение выше не очевидно (как было со мной, например), то возможно поможет рассуждение:
	$f(I)$ отвечает множество $B = \bigcap\limits_{i \notin I} A_i$. Оно как-то пересекается с множествами, чьи номер лежат в $I$, и таким образом может быть разобрано на неделимые куски по принадлежности элементов (диаграмма Эйлера в помощь). Так вот, $g(I)$ на самом деле описывает каждый такой кусок в отдельности.
\end{anote}

Коль скоро у нас определена функция Мёбиуса на ЧУМе $\trbr{2^{\{1, \ldots, n\}}, \subseteq}$, мы можем воспользоваться общим обращением Мёбиуса и получить выражение для $g(I)$:
\[
	g(I) = \suml_{I' \subseteq I} \mu(I', I) f(I') = \suml_{I' \subseteq I} (-1)^{|I| - |I'|} f(I')
\]

Рассмотрим случай, когда $I = \{1, \ldots, n\}$:
\[
	g(\{1, \ldots, n\}) = 0 = \suml_{I' \subseteq I} (-1)^{n - |I'|} f(I') = |A| + \suml_{I' \subset I} (-1)^{|I| - |I'|} f(I').
\]
Отсюда
\[
	|A| = -\suml_{I' \subset I} (-1)^{|I| - |I'|} f(I') = \suml_{I' \subset I} (-1)^{|I| - |I'| + 1} f(I').
\]
Сделаем замену $J = \{1, \ldots, n\} \bs I$:
\[
	|A| = |A_1 \cup \ldots \cup A_n| = \suml_{J \neq \emptyset} (-1)^{|J| + 1} f(J).
\]
Последнее выражение есть ничто иное, как формула включений и исключений.

\subsection{Разбиение чисел на слагаемые}

Общая постановка задачи формулируется так:
дано число $n \in \N$ (без нуля). Необходимо найти разбиения числа $n$ на слагаемые так, что $n = x_1 + \ldots + x_t$, при условии, что ограничения на $x_i$ и на число $t$ известны.

Самый первый вопрос в такой задаче --- считаем ли мы разбиения равными при одинаковом наборе слагаемых, или же их порядок важен.

\subsubsection*{Разбиение чисел на слагаемые с учётом порядка}

Решим поставленную задачу в предположении, когда у нас нет ограничений на $t$, но зато $\forall i \in [1; t]\ x_i \in \{n_1, \ldots, n_k\}$.

Введём функцию $f(n; n_1, \ldots, n_k)$ --- количество разбиений числа $n$, удовлетворяющих условиям задачи.

\begin{theorem} \label{partOrd}
	Количество разбиений числа $n$ можно вычислить рекурсивно:
	\[
		f(n; n_1, \ldots, n_k) = f(n - n_1; n_1, \ldots, n_k) + \ldots + f(n - n_k; n_1, \ldots, n_k)
	\]
	Базой при этом являются утверждения:
	\begin{align*}
		&f(0; n_1, \ldots, n_k) = 1,
		\\
		&f(a < 0; n_1, \ldots, n_k) = 0.
	\end{align*}
\end{theorem}

\begin{proof}
	База очевидна. Основное равенство в теореме следует из того, что нам важен порядок и мы просто суммируем все случаи, где на первое место разложения было поставлено $n_i$.
\end{proof}

\begin{corollary}
	$k(n)$ --- это число разбиений числа $n$ на слагаемые, каждое из которых лежит в диапазоне $[1; n]$. Тогда
	\[
		k(n) = f(n; 1, \ldots, n) = 2^{n - 1}.
	\]
\end{corollary}

\begin{proof}
	Можно просто доказать по индукции полученную формулу, используя теорему \ref{partOrd}. Но как вывести данную формулу?
	
	Число $n$ --- это сумма $n$ единиц. Любое разбиение можно записать в виде
	\[
		n = (1 + \ldots + 1)_{x_1} + \ldots + (1 + \ldots + 1)_{x_t}.
	\]
	Давайте упростим нашу запись: уберём все плюсы и оставим просто $n$ единиц. Тогда, у нас есть $n - 1$ позиция между единицами, куда мы можем поставить перегородку и тем самым разбить единицы на группы --- слагаемые. Любая из $n - 1$ перегородок может быть как поставлена, так и нет. Значит, всего $2^{n - 1}$ разбиений.
\end{proof}

\subsubsection*{Разбиение чисел на слагаемые без учёта порядка}

Решим поставленную задачу в том же предположении, когда у нас нет ограничений на $t$, но зато $\forall i \in [1; t]\ x_i \in \{n_1, \ldots, n_k\}$.

Но теперь введём функцию $F(n; n_1, \ldots, n_k)$ - количество разбиений числа $n$, удовлетворяющих условиям задачи.

\begin{theorem}
	Количество разбиений числа $n$ можно вычислить рекурсивно:
	\[
		F(n; n_1, \ldots, n_k) = F(n - n_1; n_1, \ldots, n_k) + F(n; n_2, \ldots, n_k)
	\]
	Базой при этом являются утверждения:
	\begin{align*}
		&F(0; n_1, \ldots, n_k) = 1
		\\
		&F(a; \emptyset) = 0
		\\
		&F(a < 0; n_1, \ldots, n_k) = 0
	\end{align*}
\end{theorem}

\begin{proof}
	База очевидна. Формула же следует из рассуждений для набора: данное разбиение содержит $n_1$ в своём наборе или нет? Если да, то спускаемся по первому слагаемому. Иначе идём по второму.
\end{proof}

\begin{note}
	Понятно, что
	\[
		p(n) = F(n; 1, \ldots, n) < 2^{n - 1}
	\]
	Точной формулы у данной функции нет, а вот её асимптотику изучали Сриниваса Рамануджан, Годфри Харди и Джон Литлвуд. Было получено утверждение
	\[
		p(n) \sim \frac{1}{4n\sqrt{3}} e^{\pi\sqrt{\frac{2}{3}}\sqrt{n - \frac{1}{24}}},\ n \to \infty
	\]
\end{note}