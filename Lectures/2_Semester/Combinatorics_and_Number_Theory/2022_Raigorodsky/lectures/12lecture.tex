\begin{proof}
	Для доказательства критерия Вейля нам потребуется \textit{теорема Вейерштрасса} из математического анализа:
	\begin{theorem}
		Если $f$ - непрерывная комплекснозначная функция с периодом 1, то $\forall \eps > 0$ существует функция $\psi(x)$ такая, что
		\[
			\psi(x) = \suml_{m \neq 0} c_m e^{2\pi i m x}
		\]
		причём
		\[
			\sup\limits_{x \in \R} |f(x) - \psi(x)| < \eps
		\]
	\end{theorem}

	\begin{note}
		Сумма по $m \neq 0$ подразумевает, что мы смотрим на конечный набор целых $m \neq 0$. Если даже так не понятно написанное, то выражение просто-напросто означает, что $\psi(x)$ - конечная линейная комбинация экспонент с какими-то коэффициентами.
	\end{note}

	Из всего сказанного выше, нам достаточно доказать теорему лишь в одну сторону: от предела к равномерной распределённости.
	
	Зафиксируем какую-то непрерывную периодическую комплекснозначную функцию $f$ с периодом 1 и $\eps > 0$. Теперь, воспользуемся теоремой выше и выберем $\psi(x)$:
	\[
		\psi(x) = \suml_{m \in M} c_m e^{2\pi i mx}, \quad \sup\limits_{x \in \R} |f(x) - \psi(x)| < \frac{\eps}{3}
	\]
	Достаточно доказать, что
	\[
		\frac{1}{N} \suml_{n = 0}^{N - 1} f(x_n) \xrightarrow[N \to \infty]{} \int_0^1 f(x)dx
	\]
	Давайте добьёмся следующей оценки на модуль суммы $\psi(x_n)$:
	\[
		\left|\frac{1}{N}\suml_{n = 0}^{N - 1} \psi(x_n)\right| < \frac{\eps}{3}
	\]
	Это сделать достаточно просто: выполним перегруппировку слагаемых, и тогда можно получить нужную оценку через условие
	\[
		\frac{1}{N}\suml_{n = 0}^{N - 1} \psi(x_n) = \frac{1}{N}\suml_{n = 0}^{N - 1}\suml_{m \in M} c_m e^{2\pi im x_n} = \suml_{m \in M} c_m\left(\frac{1}{N}\suml_{n = 0}^{N - 1} e^{2\pi im x_n}\right)
	\]
	То есть воспользуемся условием и выберем такое $N$, что выполнено неравенство (этого будет достаточно на желаемую оценку выше):
	\[
		\exists N \such \forall m \in M \quad \left|\frac{1}{N}\suml_{n = 0}^{N - 1}e^{2\pi im x_n}\right| < \frac{\eps}{3|M| \cdot \max\limits_{m \in M} |c_m|}
	\]
	Осталось написать небольшую цепочку преобразований над разностью между суммой и интегралом:
	\begin{multline*}
		\left|\frac{1}{N} \suml_{n = 0}^{N - 1} f(x_n) - \int_0^1 f(x)dx\right| =
		\\
		\Bigg|\frac{1}{N}\suml_{n = 0}^{N - 1}f(x_n) - \frac{1}{N}\suml_{n = 0}^{N - 1} \psi(x_n) + \frac{1}{N} \suml_{n = 0}^{N - 1} \psi(x_n) - \int_0^1 \psi(x)dx + \int_0^1 \psi(x)dx - \int_0^1 f(x)dx\Bigg| \le
		\\
		\left|\frac{1}{N}\suml_{n = 0}^{N - 1}f(x_n) - \frac{1}{N}\suml_{n = 0}^{N - 1}\psi(x_n)\right| + \left|\frac{1}{N}\suml_{n = 0}^{N - 1}\psi(x_n) - \int_0^1 \psi(x)dx\right| + \left|\int_0^1 \psi(x)dx - \int_0^1 f(x)\right| =
		\\
		\left|\frac{1}{N}\suml_{n = 0}^{N - 1}(f(x_n) - \psi(x_n))\right| + \left|\frac{1}{N}\suml_{n = 0}^{N - 1}\psi(x_n)\right| + \int_0^1 |\psi(x) - f(x)|dx < 3 \cdot \frac{\eps}{3} = \eps
	\end{multline*}
\end{proof}

\begin{definition}
	\textit{Суммой Гаусса} мы будем называть следующую сумму:
	\[
		S(q) = \suml_{x = 1}^q e^{\scalebox{0.85}{$2\pi i \frac{ax^2}{q}$}}, \: (a, q) = 1
	\]
\end{definition}

\begin{theorem}
	\[
		|S(q)| = \System{
			&{\sqrt{q}, \text{ если } q \text{ нечётно}}
			\\
			&{0, \text{ если } q \text{ чётно, но не делится на } 4}
			\\
			&{\sqrt{2q}, \text{ иначе}}
		}
	\]
\end{theorem}

\begin{proof}
	Вначале немного распишем сам модуль:
	\[
		|S(q)|^2 = S(q) \cdot \overline{S(q)} = \left(\suml_{x = 1}^q e^{2\pi i \frac{ax^2}{q}}\right) \cdot \left(\suml_{y = 1}^q e^{-2\pi i \frac{ay^2}{q}}\right)
	\]
	\textcolor{red}{здесь надо объяснить, почему сумма с $y^2$ это то же самое, что и сумма с $(y - x)^2$}. Отсюда имеем
	\[
		|S(q)|^2 = \left(\suml_{x = 1}^q e^{2\pi i \frac{ax^2}{q}}\right) \cdot \left(\suml_{y = 1}^q e^{-2\pi i \frac{a}{q}(y - x)^2}\right) = \suml_{y = 1}^q e^{-2\pi i \frac{a}{q}y^2} \cdot \suml_{x = 1}^q e^{2\pi i \frac{2axy}{q}}
	\]
	Разберём случаи:
	\begin{enumerate}
		\item $q$ - нечётное. Тогда, так как $(a, q) = 1$, то и $(2a, q) = 1$. Распишем правую сумму в произведении:
		\begin{itemize}
			\item $y \in \{1, \ldots, q - 1\}$:
			\[
				\suml_{x = 1}^q e^{2\pi i \frac{2axy}{q}} = e^{2\pi i (2ay / q)}\frac{e^{2\pi i (2ay / q) \cdot q} - 1}{e^{2\pi i (2ay / q)} - 1} = 0
			\]
			
			\item $y = q$:
			\[
				\suml_{x = 1}^q e^{2\pi i \frac{2axy}{q}} = \suml_{x = 1}^q e^{2\pi(2ax)i} = q
			\]
		\end{itemize}
		Таким образом, исходная сумма превратилась в следующую:
		\[
			\suml_{y = 1}^q e^{-2\pi \frac{a}{q}y^2} \cdot \suml_{x = 1}^q e^{2\pi i \frac{2axy}{q}} = e^{-2\pi i \cdot aq} \cdot q
		\]
		
		\item $q$ - чётное. Тогда из условия следует, что $a$ - нечётное. Отсюда у нас есть только 2 внутренние суммы, которые не схлопнутся в ноль: им соответствует $y \in \{q/2, q\}$. То есть
		\[
			\suml_{y = 1}^q e^{-2\pi \frac{a}{q}y^2} \cdot \suml_{x = 1}^q e^{2\pi i \frac{2axy}{q}} = e^{-2\pi \frac{aq}{4}} \cdot q + 1 \cdot q
		\]
		Получается ещё 2 случая:
		\begin{enumerate}
			\item $q \equiv 0 \pmod 4$
			\[
				|S(q)|^2 = 1 \cdot q + 1 \cdot q = 2q
			\]
			\item $q \not\equiv 0 \pmod 4 \lra q = 2t, (t, 2) = 1$
			\[
				(e^{-2\pi \frac{aq}{4}} + 1) \cdot q = (e^{-\pi a \frac{2 \cdot 2t}{4}} + 1) \cdot q = 0
			\]
		\end{enumerate}
	\end{enumerate}
\end{proof}